import Boobs.Engine
import Boobs.Compiler.Extensions
import Boobs.IO.Extensions

import System.Collections.Generic

############################
# Tasks

Task("default", ["build"])

Task("clean", ["remove build dir", "build"])

Task("build", ["init build dir", "build boobs", "build examples", "build tests"])

Task("remove build dir") do:
	if Exist("build"): RmDir("build", true)

Task("init build dir") do:
	MkDir("build")
	Cp(["lib/*.dll"], "build", true)

Task("build boobs", ["build engine", "build extensions", "build win32 helper"]) do (ctx):
	Booc(
		SourcesSet   : ["tools/boobs/**/*.boo"],
		OutputFile   : "build/boobs.exe",
		ReferencesSet: ["build/boobs.engine.dll", "build/boo.lang.useful.dll"]
		).Execute()

Task("build engine") do (ctx):
	Booc(
		SourcesSet  : ["src/boobs.engine/**/*.boo"],
		OutputFile  : "build/boobs.engine.dll",
		OutputTarget: TargetType.Library 
		).Execute()

Task("build extensions", ["build io.extensions", "build compiler.extensions"])

Task("build io.extensions") do (ctx):
	Booc(
		SourcesSet  : ["src/extensions/boobs.io.extensions/**/*.boo"],
		OutputFile  : "build/boobs.io.extensions.dll",
		OutputTarget: TargetType.Library 
		).Execute()

Task("build compiler.extensions") do (ctx):
	Booc(
		SourcesSet   : ["src/extensions/boobs.compiler.extensions/**/*.boo"],
		OutputFile   : "build/boobs.compiler.extensions.dll",
		ReferencesSet: ["build/boobs.io.extensions.dll", "lib/boo.lang.useful.dll"],
		OutputTarget : TargetType.Library
		).Execute()

Task("build win32 helper") do:
	Booc(
		SourcesSet  : ["src/boobs.win32.helper/**/*.boo"],
		OutputFile  : "build/boobs.win32.helper.dll",
		OutputTarget: TargetType.Library 
		).Execute()

Task("build examples") do (ctx):
	Booc(
		SourcesSet   : ["src/boobs.example/**/*.boo"],
		OutputFile   : "build/boobs.example.exe",
		ReferencesSet: ["build/boobs.engine.dll"]
		).Execute()

Task("build tests") do (ctx):
	pass
/*
	Booc(
		SourcesSet   : ["src/boobs.tests/**/*.boo"],
		OutputFile   : "build/boobs.tests.dll",
		OutputTarget : TargetType.Library,
		ReferencesSet: ["build/boobs.io.extensions.dll", 
						"build/boobs.compiler.extensions.dll",
						"nunit.framework.dll"]
		).Execute()
*/
